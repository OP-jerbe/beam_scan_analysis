<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beam Scan Analysis - Quick Start Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 20px;
        }

        h1,
        h2 {
            color: #0056b3;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li::before {
            content: "• ";
            color: #0056b3;
        }

        .summary-data {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 20px;
            background-color: #f9f9f9;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Quick Start Guide: Beam Scan Analysis Application</h1>
        <p>Welcome to the Beam Scan Analysis Application! This tool allows you to analyze beam scan data from CSV files
            generated by the Hyperion Test Stand application and visualize the results as either a heatmap or a 3D
            surface plot. The visualizations will open in your default web browser. Follow the steps below to get
            started.</p>

        <h2>1. Selecting a CSV File</h2>
        <p>Click the <strong>Select CSV File</strong> button above the input fields to browse and select the CSV file
            containing the beam scan data. The CSV file should have the appropriate format for analysis (the app expects
            data organized with headers corresponding to the beam scan variables). The Serial Number, Beam Voltage, and
            Extractor Voltage fields will be automatically filled when the CSV file is loaded. Solenoid Current and Test
            Stand will also be automatically filled if a "well structured" csv has been selected. A "well structured"
            csv is one that has been generated by the app through the "Export Scan Data" selection in the file menu.</p>

        <h2>2. Input Parameters</h2>
        <p>Once the CSV file is selected, you can modify the following input fields:</p>
        <ul>
            <li><strong>Serial Number</strong>: Change the serial number if needed.</li>
            <li><strong>Beam Voltage</strong>: Change the beam voltage in kilovolts (kV) if inaccurate.</li>
            <li><strong>Extractor Voltage</strong>: Change the extractor voltage in kilovolts (kV) if inaccurate.</li>
            <li><strong>Solenoid Current (A)</strong>: Input the solenoid current in amperes (A) or change autopopulated
                value if needed.</li>
            <li><strong>Test Stand</strong>: Enter the test stand identifier.</li>
            <li><strong>Set Max Z (µA)</strong>: Set the maximum current value (in microamperes) for the Z-axis scaling.
            </li>
            <li><strong>Set Min Z (µA)</strong>: Set the minimum current value (in microamperes) for the Z-axis scaling.
            </li>
        </ul>

        <h2>3. Viewing the Beam Scan Summary</h2>
        <p>To the right of the <strong>Select CSV File</strong> button, input parameters, and plot button, a summary
            of the beam scan data is displayed. This summary includes key information from the loaded file, including:
        </p>
        <div class="summary-data">
            <ul>
                <li><strong>Serial Number:</strong> Displays the serial number of the scan.</li>
                <li><strong>Scan Date and Time:</strong> The date and time when the scan was performed.</li>
                <li><strong>Resolution:</strong> The resolution setting of the scan.</li>
                <li><strong>Step Size:</strong> The step size used in the scan.</li>
                <li><strong>Polarity:</strong> The polarity setting during the scan (determined by Beam Voltage).</li>
                <li><strong>Pressure:</strong> The pressure reading at the end of the scan.</li>
                <li><strong>Beam Voltage:</strong> The beam voltage reading at the end of the scan.</li>
                <li><strong>Extractor Voltage:</strong> The extractor voltage reading at the end of the scan.</li>
                <li><strong>Beam Supply Current:</strong> The beam supply current reading at the end of the scan.</li>
                <li><strong>Peak Location:</strong> The location of the peak beam intensity.</li>
                <li><strong>Peak Cup Current:</strong> The peak current recorded at the Faraday cup in nanoamps.</li>
                <li><strong>Peak Total Current:</strong> The peak total current recorded in microamps.</li>
                <li><strong>FWHM Area:</strong> The area enclosed at full-width half-maximum.</li>
                <li><strong>FWQM Area:</strong> The area enclosed at full-width quarter-maximum.</li>
            </ul>
        </div>

        <h2>4. Plotting the Data</h2>
        <p>Once the CSV file is selected, click the <strong>Plot Beam Scan</strong> button to visualize the beam scan.
            This button will become enabled only after selecting a valid file. If a contour extends beyond the limits of
            the stage, the enclosed contour area cannot be calculated, and zeros will be displayed for the FWHM and/or
            FWQM.</p>

        <h2>5. Visualization Options</h2>
        <p>The app provides four types of visualizations:</p>
        <ul>
            <li><strong>3D Surface</strong>: Displays the data as a 3D surface plot.</li>
            <li><strong>Heatmap</strong>: Displays the data as a 2D heatmap.</li>
            <li><strong>X/Y Beam Cross Sections</strong>: Displays the scan data as an X and Y cross section profile at
                the geometric center of the beam envelope.</li>
            <li><strong>X/Y Angular Intensity vs Divergence Angle</strong>: Displays the X and Y cross sections scan
                data as angular intensity vs divergence angle at the geometric center (centroid) of the beam envelope.
                Angular Intensity and Divergence angle are calculated from the Cup Diam. and Dist. to Cup input fields.
            </li>
        </ul>
        <p>Any option may be toggled on or off using the checkboxes below the <strong>Plot Beam Scan</strong> button.
            By default, all visualizations are enabled.</p>

        <h2>6. Overriding the Centroid</h2>
        <p>To override the computed centroid location, select the <strong>Override Centroid</strong> option from the
            Options menu. This option allows you to manually set the centroid coordinates used in visualization.</p>
        <ul>
            <li>When you select <strong>Override Centroid</strong>, a new window will open with input fields for
                <strong>X Coordinate</strong> and <strong>Y Coordinate</strong>.
            </li>
            <li>Enter values into both fields and click the <strong>Set Centroid Coordinates</strong> button to apply
                your override. The window will close, and the application will use your entered coordinates instead of
                the automatically calculated centroid. The menu option will appear checked to indicate that an override
                is active.</li>
            <li>If you close the window without entering values, or leave one of the input fields blank, the centroid
                will not be overridden and the menu option will remain unchecked.</li>
            <li>When a new CSV file is selected, the <strong>Override Centroid</strong> option is automatically reset
                and unchecked, even if an override was previously set.</li>
        </ul>

        <h2>7. Saving Interactive Plots as HTML files</h2>
        <p>To save the plots as interactive HTML files select the visualizations you would like to save from the
            <strong>Save</strong> dropdown menu. The filename is autogenerated based on the input fields in the
            application window.
        </p>

        <h2>8. Exporting Scan Data</h2>
        <p>To export the scan data into a "well structured" CSV file, select the <strong>Export Scan Data</strong>
            option in the File
            menu. Browse and select the folder where you wish the CSV file to be saved to. The filename is autogenerated
            based on the input fields in the application window. The exported CSV file will retain more metadata related
            to the beam scan for storage and future use.</p>

        <h2>9. Further Assistance</h2>
        <p>For any further assistance, questions, or bug reports please reach out to Joshua Erbe (<a
                href="mailto:j.erbe@oregon-physics.com">j.erbe@oregon-physics.com</a>).</p>
        <hr>
        <p style="font-size: 0.9em;">App Version: 1.8.0 | Powered by Plotly & PySide6</p>
    </div>

</body>

</html>